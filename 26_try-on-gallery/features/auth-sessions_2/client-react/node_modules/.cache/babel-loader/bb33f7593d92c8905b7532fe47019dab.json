{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Wieslaw\\\\Documents\\\\Workspace SpringTS\\\\MERN\\\\auth-sessions_2\\\\client-react\\\\src\\\\screens\\\\Login.jsx\";\nimport React, { useState } from \"react\";\nimport authSvg from \"../assests/login.svg\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { authenticate, isAuth } from \"../helpers/auth\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { GoogleLogin } from \"@react-oauth/google\";\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\n\nconst dotenv = require(\"dotenv\");\n\ndotenv.config({\n  path: \"../../.env\"\n});\n\nconst Login = ({\n  history\n}) => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password1: \"\",\n    textChange: \"Sign In\"\n  });\n  const {\n    email,\n    password1,\n    textChange\n  } = formData;\n\n  const handleChange = text => e => {\n    setFormData({ ...formData,\n      [text]: e.target.value\n    });\n  };\n\n  const sendGoogleToken = tokenId => {\n    console.log(tokenId);\n    axios.post(`${process.env.REACT_APP_API_URL}/googlelogin`, {\n      idToken: tokenId\n    }).then(res => {\n      console.log(res.data);\n      informParent(res);\n    }).catch(error => {\n      console.log(\"GOOGLE SIGNIN ERROR\", error.response);\n    });\n  };\n\n  const informParent = response => {\n    authenticate(response, () => {\n      isAuth() && isAuth().role === \"admin\" ? history.push(\"/admin\") : history.push(\"/private\");\n    });\n  };\n\n  const sendFacebookToken = (userID, accessToken) => {\n    axios.post(`${process.env.REACT_APP_API_URL}/facebooklogin`, {\n      userID,\n      accessToken\n    }).then(res => {\n      console.log(res.data);\n      informParent(res);\n    }).catch(error => {\n      console.log(\"GOOGLE SIGNIN ERROR\", error.response);\n    });\n  };\n\n  const responseGoogle = response => {\n    console.log(response);\n    sendGoogleToken(response);\n  };\n\n  const responseFacebook = response => {\n    console.log(response);\n    sendFacebookToken(response.userID, response.accessToken);\n  };\n\n  const handleSubmit = e => {\n    console.log(process.env.REACT_APP_API_URL);\n    e.preventDefault();\n\n    if (email && password1) {\n      setFormData({ ...formData,\n        textChange: \"Submitting\"\n      });\n      axios.post(`${process.env.REACT_APP_API_URL}/login`, {\n        email,\n        password: password1\n      }).then(res => {\n        authenticate(res, () => {\n          setFormData({ ...formData,\n            email: \"\",\n            password1: \"\",\n            textChange: \"Submitted\"\n          });\n          isAuth() && isAuth().role === \"admin\" ? history.push(\"/admin\") : history.push(\"/private\");\n          toast.success(`Hey ${res.data.user.name}, Welcome back!`);\n        });\n      }).catch(err => {\n        setFormData({ ...formData,\n          email: \"\",\n          password1: \"\",\n          textChange: \"Sign In\"\n        });\n        console.log(err.response);\n        toast.error(err.response.data.errors);\n      });\n    } else {\n      toast.error(\"Please fill all fields\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-900 flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, isAuth() ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }) : null, /*#__PURE__*/React.createElement(ToastContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"max-w-screen-xl m-0 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lg:w-1/2 xl:w-5/12 p-6 sm:p-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-12 flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl xl:text-3xl font-extrabold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full flex-1 mt-8 text-indigo-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(GoogleLogin, {\n    onSuccess: responseGoogle,\n    onError: () => {\n      console.log(\"Login Failed\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"fb-login-button\",\n    \"data-width\": \"\",\n    \"data-size\": \"large\",\n    \"data-button-type\": \"continue_with\",\n    \"data-layout\": \"default\",\n    \"data-auto-logout-link\": \"false\",\n    \"data-use-continue-as\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"spinner\",\n    style: ({\n      background: \"#4267b2\"\n    }, {\n      borderRadius: \"5px\"\n    }, {\n      color: \"white\"\n    }, {\n      height: \"40px\"\n    }, {\n      textAAlign: \"center\"\n    }, {\n      width: \"250px\"\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"fb-login-button\",\n    \"data-max-rows\": \"1\",\n    \"data-size\": \"large\",\n    \"data-button-type\": \"continue_with\",\n    \"data-use-continue-as\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: `${process.env.REACT_APP_FACEBOOK_CLIENT}`,\n    autoLoad: false,\n    callback: responseFacebook,\n    render: renderProps => /*#__PURE__*/React.createElement(\"button\", {\n      onClick: renderProps.onClick,\n      className: \"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"fb-login-button\",\n      \"data-width\": \"\",\n      \"data-size\": \"large\",\n      \"data-button-type\": \"continue_with\",\n      \"data-layout\": \"default\",\n      \"data-auto-logout-link\": \"false\",\n      \"data-use-continue-as\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 23\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\",\n    href: \"/register\",\n    target: \"_self\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-user-plus fa 1x w-6  -ml-2 text-indigo-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  }, \"Sign Up\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-12 border-b text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"leading-none px-2 inline-block text-sm text-gray-600 tracking-wide font-medium bg-white transform translate-y-1/2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, \"Or sign In with e-mail\")), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"mx-auto max-w-xs relative \",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white\",\n    type: \"email\",\n    placeholder: \"Email\",\n    onChange: handleChange(\"email\"),\n    value: email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5\",\n    type: \"password\",\n    placeholder: \"Password\",\n    onChange: handleChange(\"password1\"),\n    value: password1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"mt-5 tracking-wide font-semibold bg-indigo-500 text-gray-100 w-full py-4 rounded-lg hover:bg-indigo-700 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-sign-in-alt  w-6  -ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"ml-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 19\n    }\n  }, \"Sign In\")), /*#__PURE__*/React.createElement(Link, {\n    to: \"/users/password/forget\",\n    className: \"no-underline hover:underline text-indigo-500 text-md text-right absolute right-0  mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, \"Forget password?\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-1 bg-indigo-100 text-center hidden lg:flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat\",\n    style: {\n      backgroundImage: `url(${authSvg})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }))), \";\");\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/Wieslaw/Documents/Workspace SpringTS/MERN/auth-sessions_2/client-react/src/screens/Login.jsx"],"names":["React","useState","ToastContainer","toast","axios","authenticate","isAuth","Link","Redirect","GoogleLogin","FacebookLogin","dotenv","require","config","path","Login","history","formData","setFormData","email","password1","textChange","handleChange","text","e","target","value","sendGoogleToken","tokenId","console","log","post","process","env","REACT_APP_API_URL","idToken","then","res","data","informParent","catch","error","response","role","push","sendFacebookToken","userID","accessToken","responseGoogle","responseFacebook","handleSubmit","preventDefault","password","success","user","name","err","errors","background","borderRadius","color","height","textAAlign","width","REACT_APP_FACEBOOK_CLIENT","renderProps","onClick","backgroundImage","authSvg"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;AAEA,SAASC,cAAT,EAAyBC,KAAzB,QAAsC,gBAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,MAAvB,QAAqC,iBAArC;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,aAAP,MAA0B,uDAA1B;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACAD,MAAM,CAACE,MAAP,CAAc;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAd;;AAEA,MAAMC,KAAK,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAC7B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC;AACvCkB,IAAAA,KAAK,EAAE,EADgC;AAEvCC,IAAAA,SAAS,EAAE,EAF4B;AAGvCC,IAAAA,UAAU,EAAE;AAH2B,GAAD,CAAxC;AAKA,QAAM;AAAEF,IAAAA,KAAF;AAASC,IAAAA,SAAT;AAAoBC,IAAAA;AAApB,MAAmCJ,QAAzC;;AACA,QAAMK,YAAY,GAAIC,IAAD,IAAWC,CAAD,IAAO;AACpCN,IAAAA,WAAW,CAAC,EAAE,GAAGD,QAAL;AAAe,OAACM,IAAD,GAAQC,CAAC,CAACC,MAAF,CAASC;AAAhC,KAAD,CAAX;AACD,GAFD;;AAIA,QAAMC,eAAe,GAAIC,OAAD,IAAa;AACnCC,IAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACAxB,IAAAA,KAAK,CACF2B,IADH,CACS,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,cADzC,EACwD;AACpDC,MAAAA,OAAO,EAAEP;AAD2C,KADxD,EAIGQ,IAJH,CAISC,GAAD,IAAS;AACbR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB;AACAC,MAAAA,YAAY,CAACF,GAAD,CAAZ;AACD,KAPH,EAQGG,KARH,CAQUC,KAAD,IAAW;AAChBZ,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCW,KAAK,CAACC,QAAzC;AACD,KAVH;AAWD,GAbD;;AAcA,QAAMH,YAAY,GAAIG,QAAD,IAAc;AACjCrC,IAAAA,YAAY,CAACqC,QAAD,EAAW,MAAM;AAC3BpC,MAAAA,MAAM,MAAMA,MAAM,GAAGqC,IAAT,KAAkB,OAA9B,GACI3B,OAAO,CAAC4B,IAAR,CAAa,QAAb,CADJ,GAEI5B,OAAO,CAAC4B,IAAR,CAAa,UAAb,CAFJ;AAGD,KAJW,CAAZ;AAKD,GAND;;AAQA,QAAMC,iBAAiB,GAAG,CAACC,MAAD,EAASC,WAAT,KAAyB;AACjD3C,IAAAA,KAAK,CACF2B,IADH,CACS,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,gBADzC,EAC0D;AACtDY,MAAAA,MADsD;AAEtDC,MAAAA;AAFsD,KAD1D,EAKGX,IALH,CAKSC,GAAD,IAAS;AACbR,MAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,IAAhB;AACAC,MAAAA,YAAY,CAACF,GAAD,CAAZ;AACD,KARH,EASGG,KATH,CASUC,KAAD,IAAW;AAChBZ,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCW,KAAK,CAACC,QAAzC;AACD,KAXH;AAYD,GAbD;;AAcA,QAAMM,cAAc,GAAIN,QAAD,IAAc;AACnCb,IAAAA,OAAO,CAACC,GAAR,CAAYY,QAAZ;AACAf,IAAAA,eAAe,CAACe,QAAD,CAAf;AACD,GAHD;;AAKA,QAAMO,gBAAgB,GAAIP,QAAD,IAAc;AACrCb,IAAAA,OAAO,CAACC,GAAR,CAAYY,QAAZ;AACAG,IAAAA,iBAAiB,CAACH,QAAQ,CAACI,MAAV,EAAkBJ,QAAQ,CAACK,WAA3B,CAAjB;AACD,GAHD;;AAKA,QAAMG,YAAY,GAAI1B,CAAD,IAAO;AAC1BK,IAAAA,OAAO,CAACC,GAAR,CAAYE,OAAO,CAACC,GAAR,CAAYC,iBAAxB;AACAV,IAAAA,CAAC,CAAC2B,cAAF;;AACA,QAAIhC,KAAK,IAAIC,SAAb,EAAwB;AACtBF,MAAAA,WAAW,CAAC,EAAE,GAAGD,QAAL;AAAeI,QAAAA,UAAU,EAAE;AAA3B,OAAD,CAAX;AACAjB,MAAAA,KAAK,CACF2B,IADH,CACS,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,QADzC,EACkD;AAC9Cf,QAAAA,KAD8C;AAE9CiC,QAAAA,QAAQ,EAAEhC;AAFoC,OADlD,EAKGgB,IALH,CAKSC,GAAD,IAAS;AACbhC,QAAAA,YAAY,CAACgC,GAAD,EAAM,MAAM;AACtBnB,UAAAA,WAAW,CAAC,EACV,GAAGD,QADO;AAEVE,YAAAA,KAAK,EAAE,EAFG;AAGVC,YAAAA,SAAS,EAAE,EAHD;AAIVC,YAAAA,UAAU,EAAE;AAJF,WAAD,CAAX;AAMAf,UAAAA,MAAM,MAAMA,MAAM,GAAGqC,IAAT,KAAkB,OAA9B,GACI3B,OAAO,CAAC4B,IAAR,CAAa,QAAb,CADJ,GAEI5B,OAAO,CAAC4B,IAAR,CAAa,UAAb,CAFJ;AAGAzC,UAAAA,KAAK,CAACkD,OAAN,CAAe,OAAMhB,GAAG,CAACC,IAAJ,CAASgB,IAAT,CAAcC,IAAK,iBAAxC;AACD,SAXW,CAAZ;AAYD,OAlBH,EAmBGf,KAnBH,CAmBUgB,GAAD,IAAS;AACdtC,QAAAA,WAAW,CAAC,EACV,GAAGD,QADO;AAEVE,UAAAA,KAAK,EAAE,EAFG;AAGVC,UAAAA,SAAS,EAAE,EAHD;AAIVC,UAAAA,UAAU,EAAE;AAJF,SAAD,CAAX;AAMAQ,QAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAG,CAACd,QAAhB;AACAvC,QAAAA,KAAK,CAACsC,KAAN,CAAYe,GAAG,CAACd,QAAJ,CAAaJ,IAAb,CAAkBmB,MAA9B;AACD,OA5BH;AA6BD,KA/BD,MA+BO;AACLtD,MAAAA,KAAK,CAACsC,KAAN,CAAY,wBAAZ;AACD;AACF,GArCD;;AAsCA,sBACE;AAAK,IAAA,SAAS,EAAC,4DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGnC,MAAM,kBAAK,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAL,GAA2B,IADpC,eAEE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAK,IAAA,SAAS,EAAC,sFAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,kCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,qCAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAIE;AAAK,IAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AACE,IAAA,SAAS,EAAE0C,cADb;AAEE,IAAA,OAAO,EAAE,MAAM;AACbnB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD,KAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE;AAAK,IAAA,KAAK,EAAC,iBAAX;AAA6B,kBAAW,EAAxC;AAA2C,iBAAU,OAArD;AAA6D,wBAAiB,eAA9E;AAA8F,mBAAY,SAA1G;AAAoH,6BAAsB,OAA1I;AAAkJ,4BAAqB,MAAvK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE;AACE,IAAA,EAAE,EAAC,SADL;AAEE,IAAA,KAAK,GACF;AAAE4B,MAAAA,UAAU,EAAE;AAAd,OACD;AAAEC,MAAAA,YAAY,EAAE;AAAhB,KADC,EAED;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAFC,EAGD;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAHC,EAID;AAAEC,MAAAA,UAAU,EAAE;AAAd,KAJC,EAKD;AAAEC,MAAAA,KAAK,EAAE;AAAT,KANG,CAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAWE;AACE,IAAA,KAAK,EAAC,iBADR;AAEE,qBAAc,GAFhB;AAGE,iBAAU,OAHZ;AAIE,wBAAiB,eAJnB;AAKE,4BAAqB,MALvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CATF,eA4BE,oBAAC,aAAD;AACE,IAAA,KAAK,EAAG,GAAE/B,OAAO,CAACC,GAAR,CAAY+B,yBAA0B,EADlD;AAEE,IAAA,QAAQ,EAAE,KAFZ;AAGE,IAAA,QAAQ,EAAEf,gBAHZ;AAIE,IAAA,MAAM,EAAGgB,WAAD,iBACN;AACE,MAAA,OAAO,EAAEA,WAAW,CAACC,OADvB;AAEE,MAAA,SAAS,EAAC,oOAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAK,MAAA,KAAK,EAAC,iBAAX;AAA6B,oBAAW,EAAxC;AAA2C,mBAAU,OAArD;AAA6D,0BAAiB,eAA9E;AAA8F,qBAAY,SAA1G;AAAoH,+BAAsB,OAA1I;AAAkJ,8BAAqB,MAAvK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BF,eA8CE;AACE,IAAA,SAAS,EAAC,oOADZ;AAGE,IAAA,IAAI,EAAC,WAHP;AAIE,IAAA,MAAM,EAAC,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME;AAAG,IAAA,SAAS,EAAC,mDAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAOE;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAPF,CA9CF,CADF,eAyDE;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,mHAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,CAzDF,eA8DE;AACE,IAAA,SAAS,EAAC,4BADZ;AAEE,IAAA,QAAQ,EAAEhB,YAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AACE,IAAA,SAAS,EAAC,iKADZ;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,WAAW,EAAC,OAHd;AAIE,IAAA,QAAQ,EAAE5B,YAAY,CAAC,OAAD,CAJxB;AAKE,IAAA,KAAK,EAAEH,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAWE;AACE,IAAA,SAAS,EAAC,sKADZ;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,WAAW,EAAC,UAHd;AAIE,IAAA,QAAQ,EAAEG,YAAY,CAAC,WAAD,CAJxB;AAKE,IAAA,KAAK,EAAEF,SALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,eAkBE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,0NAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAG,IAAA,SAAS,EAAC,gCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKE;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALF,CAlBF,eAyBE,oBAAC,IAAD;AACE,IAAA,EAAE,EAAC,wBADL;AAEE,IAAA,SAAS,EAAC,wFAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAzBF,CA9DF,CAJF,CADF,CADF,eAuGE;AAAK,IAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,uDADZ;AAEE,IAAA,KAAK,EAAE;AAAE+C,MAAAA,eAAe,EAAG,OAAMC,OAAQ;AAAlC,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAvGF,CAHF,MADF;AAqHD,CApND;;AAsNA,eAAerD,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport authSvg from \"../assests/login.svg\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { authenticate, isAuth } from \"../helpers/auth\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { GoogleLogin } from \"@react-oauth/google\";\nimport FacebookLogin from \"react-facebook-login/dist/facebook-login-render-props\";\nconst dotenv = require(\"dotenv\");\ndotenv.config({ path: \"../../.env\" });\n\nconst Login = ({ history }) => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password1: \"\",\n    textChange: \"Sign In\",\n  });\n  const { email, password1, textChange } = formData;\n  const handleChange = (text) => (e) => {\n    setFormData({ ...formData, [text]: e.target.value });\n  };\n\n  const sendGoogleToken = (tokenId) => {\n    console.log(tokenId);\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/googlelogin`, {\n        idToken: tokenId,\n      })\n      .then((res) => {\n        console.log(res.data);\n        informParent(res);\n      })\n      .catch((error) => {\n        console.log(\"GOOGLE SIGNIN ERROR\", error.response);\n      });\n  };\n  const informParent = (response) => {\n    authenticate(response, () => {\n      isAuth() && isAuth().role === \"admin\"\n        ? history.push(\"/admin\")\n        : history.push(\"/private\");\n    });\n  };\n\n  const sendFacebookToken = (userID, accessToken) => {\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/facebooklogin`, {\n        userID,\n        accessToken,\n      })\n      .then((res) => {\n        console.log(res.data);\n        informParent(res);\n      })\n      .catch((error) => {\n        console.log(\"GOOGLE SIGNIN ERROR\", error.response);\n      });\n  };\n  const responseGoogle = (response) => {\n    console.log(response);\n    sendGoogleToken(response);\n  };\n\n  const responseFacebook = (response) => {\n    console.log(response);\n    sendFacebookToken(response.userID, response.accessToken);\n  };\n\n  const handleSubmit = (e) => {\n    console.log(process.env.REACT_APP_API_URL);\n    e.preventDefault();\n    if (email && password1) {\n      setFormData({ ...formData, textChange: \"Submitting\" });\n      axios\n        .post(`${process.env.REACT_APP_API_URL}/login`, {\n          email,\n          password: password1,\n        })\n        .then((res) => {\n          authenticate(res, () => {\n            setFormData({\n              ...formData,\n              email: \"\",\n              password1: \"\",\n              textChange: \"Submitted\",\n            });\n            isAuth() && isAuth().role === \"admin\"\n              ? history.push(\"/admin\")\n              : history.push(\"/private\");\n            toast.success(`Hey ${res.data.user.name}, Welcome back!`);\n          });\n        })\n        .catch((err) => {\n          setFormData({\n            ...formData,\n            email: \"\",\n            password1: \"\",\n            textChange: \"Sign In\",\n          });\n          console.log(err.response);\n          toast.error(err.response.data.errors);\n        });\n    } else {\n      toast.error(\"Please fill all fields\");\n    }\n  };\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900 flex justify-center\">\n      {isAuth() ? <Redirect to=\"/\" /> : null}\n      <ToastContainer />\n      <div className=\"max-w-screen-xl m-0 sm:m-20 bg-white shadow sm:rounded-lg flex justify-center flex-1\">\n        <div className=\"lg:w-1/2 xl:w-5/12 p-6 sm:p-12\">\n          <div className=\"mt-12 flex flex-col items-center\">\n            <h1 className=\"text-2xl xl:text-3xl font-extrabold\">\n              {/* Sign In Now */}\n            </h1>\n            <div className=\"w-full flex-1 mt-8 text-indigo-500\">\n              <div className=\"flex flex-col items-center\">\n                <GoogleLogin\n                  onSuccess={responseGoogle}\n                  onError={() => {\n                    console.log(\"Login Failed\");\n                  }}\n                />\n\n                <div class=\"fb-login-button\" data-width=\"\" data-size=\"large\" data-button-type=\"continue_with\" data-layout=\"default\" data-auto-logout-link=\"false\" data-use-continue-as=\"true\"></div>\n                <div\n                  id=\"spinner\"\n                  style={\n                    ({ background: \"#4267b2\" },\n                    { borderRadius: \"5px\" },\n                    { color: \"white\" },\n                    { height: \"40px\" },\n                    { textAAlign: \"center\" },\n                    { width: \"250px\" })\n                  }\n                >\n                  <div\n                    class=\"fb-login-button\"\n                    data-max-rows=\"1\"\n                    data-size=\"large\"\n                    data-button-type=\"continue_with\"\n                    data-use-continue-as=\"true\"\n                  ></div>\n                </div>\n                <FacebookLogin\n                  appId={`${process.env.REACT_APP_FACEBOOK_CLIENT}`}\n                  autoLoad={false}\n                  callback={responseFacebook}\n                  render={(renderProps) => (\n                    <button\n                      onClick={renderProps.onClick}\n                      className=\"w-full max-w-xs font-bold shadow-sm rounded-lg py-3 bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\"\n                    >\n                      <div class=\"fb-login-button\" data-width=\"\" data-size=\"large\" data-button-type=\"continue_with\" data-layout=\"default\" data-auto-logout-link=\"false\" data-use-continue-as=\"true\"></div>\n                      \n                      {/* <div className=\" p-2 rounded-full \">\n                        <i className=\"fab fa-facebook\" />\n                      </div>\n                      <span className=\"ml-4\">Sign In with Facebook</span> */}\n                    </button>\n                  )}\n                />\n                <a\n                  className=\"w-full max-w-xs font-bold shadow-sm rounded-lg py-3\n           bg-indigo-100 text-gray-800 flex items-center justify-center transition-all duration-300 ease-in-out focus:outline-none hover:shadow focus:shadow-sm focus:shadow-outline mt-5\"\n                  href=\"/register\"\n                  target=\"_self\"\n                >\n                  <i className=\"fas fa-user-plus fa 1x w-6  -ml-2 text-indigo-500\" />\n                  <span className=\"ml-4\">Sign Up</span>\n                </a>\n              </div>\n              <div className=\"my-12 border-b text-center\">\n                <div className=\"leading-none px-2 inline-block text-sm text-gray-600 tracking-wide font-medium bg-white transform translate-y-1/2\">\n                  Or sign In with e-mail\n                </div>\n              </div>\n              <form\n                className=\"mx-auto max-w-xs relative \"\n                onSubmit={handleSubmit}\n              >\n                <input\n                  className=\"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  onChange={handleChange(\"email\")}\n                  value={email}\n                />\n                <input\n                  className=\"w-full px-8 py-4 rounded-lg font-medium bg-gray-100 border border-gray-200 placeholder-gray-500 text-sm focus:outline-none focus:border-gray-400 focus:bg-white mt-5\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  onChange={handleChange(\"password1\")}\n                  value={password1}\n                />\n                <button\n                  type=\"submit\"\n                  className=\"mt-5 tracking-wide font-semibold bg-indigo-500 text-gray-100 w-full py-4 rounded-lg hover:bg-indigo-700 transition-all duration-300 ease-in-out flex items-center justify-center focus:shadow-outline focus:outline-none\"\n                >\n                  <i className=\"fas fa-sign-in-alt  w-6  -ml-2\" />\n                  <span className=\"ml-3\">Sign In</span>\n                </button>\n                <Link\n                  to=\"/users/password/forget\"\n                  className=\"no-underline hover:underline text-indigo-500 text-md text-right absolute right-0  mt-2\"\n                >\n                  Forget password?\n                </Link>\n              </form>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex-1 bg-indigo-100 text-center hidden lg:flex\">\n          <div\n            className=\"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat\"\n            style={{ backgroundImage: `url(${authSvg})` }}\n          ></div>\n        </div>\n      </div>\n      ;\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}